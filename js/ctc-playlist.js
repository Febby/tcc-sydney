!function(t,e,i){function o(t){return t.length<=8?!1:!0}function n(t){var e=null;if(-1!==t.indexOf("vim")){var i=/vimeo.*\/(\d+)/i.exec(t);i&&(e=i[1])}else if(-1!==t.indexOf("yout")){var o=/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|\&v=)([^#\&\?]*).*/,i=t.match(o);i&&11==i[2].length&&(e=i[2])}return e}function a(e){var i=e.link,o=e.url;t.ajax({url:o,dataType:"jsonp",success:function(t){var e=t[0].title,o="by "+t[0].user_name;i.find(".rp_title").html(e.length>50?e.substr(0,50)+"&hellip;":e),i.find(".rp_author").html(o),i.find(".rp_thumbnail img").attr("src",t[0].thumbnail_small)}})}function l(e){var i=e.link,o=e.url;t.ajax({url:o,dataType:"jsonp",success:function(t){var e=t.items[0].snippet.title,o="by "+t.items[0].snippet.channelTitle;i.find(".rp_title").html(e.length>50?e.substr(0,50)+"&hellip;":e),i.find(".rp_author").html(o)}})}function r(e,i){t.ajax({url:"https://www.googleapis.com/youtube/v3/channels?part=contentDetails&forUsername="+e+"&key=AIzaSyCIlwa-7d7qpKS0Nj5vhI7tb-0minC-qZ8",dataType:"jsonp",success:function(t){i(t.items[0].contentDetails.relatedPlaylists.uploads)}})}function s(e,i){t.ajax({url:"https://www.googleapis.com/youtube/v3/playlistItems?part=snippet&maxResults=50&playlistId="+e+"&key=AIzaSyCIlwa-7d7qpKS0Nj5vhI7tb-0minC-qZ8",dataType:"jsonp",success:function(t){i(t.items.reverse())}})}function u(e,i){for(var o,n,a=0,l=e.length;l>a;a++)o=e[a],n=o.snippet.resourceId.videoId,li='<li><a href="https://www.youtube.com/watch?v='+n+'"></a></li>',t(li).prependTo("#rp_playlist");i()}function p(e,i){t.ajax({url:"http://vimeo.com/api/v2/"+e+"/videos.json",dataType:"jsonp",success:function(t){i(t.reverse())}})}function c(e,i){t.ajax({url:"http://vimeo.com/api/v2/album/"+e+"/videos.json",dataType:"jsonp",success:function(t){i(t.reverse())}})}function d(e,i){for(var o,n,a=0,l=e.length;l>a;a++)o=e[a],n=o.id,li='<li><a href="https://www.vimeo.com/'+n+'"></a></li>',t(li).prependTo("#rp_playlist");i()}function h(i,o){this.element=i,this.options=t.extend({},y,o),this._defaults=y,this._name=v,this._protocol="auto"===this.options.secure?"https:"===e.location.protocol?"https://":"http://":this.options.secure?"https://":"http://",this.isFirst=!0,this.init()}var f,m,v="responsiveplaylist",y={autoPlayOnLoad:!1,autoPlay:!1,allowFullScreen:!0,deepLinks:!0,onChange:function(){},start:1,youtube:{autohide:"2",rel:"1",theme:"dark",color:"white",showinfo:"1",vq:"medium"},vimeo:{title:"1",byline:"1",portrait:"1",color:"ffffff"},holderId:"rp_video",secure:"auto"};h.prototype={init:function(){var h=this,f=h.options.deepLinks&&-1!==e.location.hash.indexOf("#video-")?e.location.hash:null,m=function(){t(h.element).find("li").each(function(e){var i=t(this),r=e+1;i.find("a:first").each(function(){var e=t(this),s=n(e.attr("href")),u=i.text();e.data("yt-href",e.attr("href")),e.attr("href","#video-"+r),e.data("yt-id",s);var p,c="";o(s)?(l({link:e,url:"https://www.googleapis.com/youtube/v3/videos?part=id%2Csnippet%2Cstatistics&id="+s+"&key=AIzaSyCIlwa-7d7qpKS0Nj5vhI7tb-0minC-qZ8"}),c=h._protocol+"i.ytimg.com/vi/"+s+"/default.jpg"):a({link:e,url:h._protocol+"vimeo.com/api/v2/video/"+s+".json"}),p='<span class="rp_thumbnail"><img src="'+c+'" alt="'+u+'" /></span><p class="rp_title"></p><p class="rp_author"></p>',e.empty().html(p+u).attr("title",u),h.options.deepLinks||e.click(function(t){t.preventDefault(),h.handleClick(e,h.options),h.options.onChange.call()})});var s=t(i.children("a")[0]);f?s.attr("href")===f&&h.handleClick(s,h.options):r===h.options.start&&h.handleClick(s,h.options)}),h.options.deepLinks&&t(e).bind("hashchange",function(){var i=e.location.hash,o=t(h.element).find('a[href="'+i+'"]');o.length>0?h.handleClick(o,h.options):""===i&&h.handleClick(t(h.element).find("a:first"),h.options)});var r=i.createElement("div"),s=i.getElementsByTagName("base")[0]||i.getElementsByTagName("script")[0];r.innerHTML="&shy;<style> iframe { visibility: hidden; } </style>",s.parentNode.insertBefore(r,s),e.onload=function(){r.parentNode.removeChild(r)}},v=function(t){s(h.options.youtubePlaylist,function(e){u(e,t)})},y=function(t){c(h.options.vimeoAlbum,function(e){d(e,t)})},b=function(t){r(h.options.youtubeUsername,function(e){s(e,function(e){u(e,t)})})},w=function(t){p(h.options.vimeoUsername,function(e){d(e,t)})},g=[];h.options.vimeoAlbum&&g.push(y),h.options.youtubePlaylist&&g.push(v),h.options.vimeoUsername&&g.push(w),h.options.youtubeUsername&&g.push(b),g.push(m);var _=function(t,e){e||(e=0),t[e].call(this,function(){e+1<t.length&&_(t,e+1)})};_(g)},getEmbedCode:function(t,e){if(o(e)){var i="";i+='<iframe id="youtube-iframe"',i+=' src="'+this._protocol+"www.youtube.com/embed/"+e,i+="?",i+=t.autoPlayOnLoad?"autoplay=1":"autoplay=0",i+="&autohide="+t.youtube.autohide,i+="&rel="+t.youtube.rel,i+="&theme="+t.youtube.theme,i+="&color="+t.youtube.color,i+="&showinfo="+t.youtube.showinfo,i+="&vq="+t.youtube.vq,i+='&enablejsapi=1" ',t.allowFullScreen&&(i+=" webkitAllowFullScreen mozallowfullscreen allowFullScreen "),i+=' frameborder="0" ></iframe>'}else{var i="";i+='<iframe id="vimeoiframe"',i+=' src="'+this._protocol+"player.vimeo.com/video/"+e,i+="?",i+=t.autoPlayOnLoad?"autoplay=1":"autoplay=0",i+="&title="+t.vimeo.title,i+="&byline="+t.vimeo.byline,i+="&portrait="+t.vimeo.portrait,i+="&color="+t.vimeo.color,i+='&api=1&player_id=vimeoiframe" ',t.allowFullScreen&&(i+=" webkitAllowFullScreen mozallowfullscreen allowFullScreen "),i+=' type="text/html" frameborder="0" ></iframe>'}return i},handleClick:function(t,e){return e.onChange.call(),this.handleVideoClick(t,e)},handleVideoClick:function(e,i){var o=this,n=i.holder?i.holder:t("#"+i.holderId);return n.html(o.getEmbedCode(o.options,e.data("yt-id"))),e.parent().parent("ul").find("li.rp_currentVideo").removeClass("rp_currentVideo"),e.parent("li").addClass("rp_currentVideo"),o.options.autoPlayOnLoad&&o.isFirst?o.autoPlayVideo(e):o.options.autoPlay&&!o.isFirst&&o.autoPlayVideo(e),o.isFirst=!1,!1},autoPlayVideo:function(e){function i(){n.handleClick(t(".rp_currentVideo").next("li").children("a"),n.options)}var n=this;if(o(e.data("yt-id"))){var a=function(e){0===e.data&&n.handleClick(t(".rp_currentVideo").next("li").children("a"),n.options)},l=function(){f.playVideo()};yt_int=setInterval(function(){"object"==typeof YT&&(f=new YT.Player("youtube-iframe",{events:{onReady:l,onStateChange:a}}),clearInterval(yt_int))},500)}else{var r=t("#vimeoiframe")[0];m=$f(r),m.addEvent("ready",function(){m.api("play"),m.addEvent("finish",i)})}}},t.fn[v]=function(e){return this.each(function(){t.data(this,"plugin_"+v)||t.data(this,"plugin_"+v,new h(this,e))})}}(jQuery,window,document);